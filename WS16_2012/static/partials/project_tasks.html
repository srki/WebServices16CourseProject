<div ng-controller="ProjectTasksCtrl">
    <h3 style="display: inline">Project tasks</h3>

    <button type="button" class="btn btn-default pull-right rm-10 bm-10" ng-click="createTask()">
        <span class="glyphicon glyphicon-plus"></span>&nbsp;Create a task
    </button>

    <uib-alert type="danger" ng-if="alertMessage" class="tm-20">{{ alertMessage }}</uib-alert>

    <div ng-show="count" class="ta-mid">
        <uib-pagination total-items="count" ng-model="queryParams.page" max-size="5" items-per-page="queryParams.per_page"
                        class="pagination-sm" boundary-links="true" force-ellipses="true" ng-change="loadPage()"></uib-pagination>
    </div>

    <table class="table table-striped table-hover">
        <tr>
            <th class="table-cell-align header">Code</th>
            <th class="table-cell-align header">Subject</th>
            <th class="table-cell-align header-sm">Priority</th>
            <th class="table-cell-align header-md">Status</th>
        </tr>
        <tr ng-repeat="task in tasks" class="clickable" ng-click="open(task.id)">
            <td>{{ task.code }}</td>
            <td>{{ task.subject }}</td>
            <td class="text-capitalize">{{ task.priority | lowercase }}</td>
            <td class="text-capitalize">{{ task.status | lowercase }}</td>
            <td ng-show="display == 'admin'" class="table-cell-align ta-mid clickable"
                ng-click="remove(task); $event.stopPropagation();">
                <span class="glyphicon glyphicon-trash"></span>
            </td>
        </tr>
        <tr ng-if="!count">
            <td colspan="4">
                <uib-alert type="warning" class="tm-20 rm-20 lm-20"><span class="glyphicon glyphicon-warning-sign"></span>
                    &nbsp;Sorry, no results were found.
                </uib-alert>
            </td>
        </tr>
    </table>
</div>